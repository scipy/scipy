<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Overview &mdash; interpolate v0.7 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '',
          VERSION:     '0.7',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: ''
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/interface.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="contents" title="Global table of contents" href="contents.html" />
    <link rel="index" title="Global index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="top" title="interpolate v0.7 documentation" href="index.html" />
    <link rel="prev" title="Welcome to interpolate&#8217;s documentation!" href="index.html" />
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to interpolate&#8217;s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">interpolate v0.7 documentation</a> &raquo;</li>
      </ul>
    </div>
    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  
  <div class="section">
<h1 id="overview">Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h1>
<p>The interpolate package provides tools for interpolating and extrapolating new data points from a known set of data points.
Interpolate provides both a functional interface that is flexible and easy to use as well as an object oriented interface that
can be more efficient and flexible for some cases.  It is able to interpolate and extrapolate in 1D, 2D, and even N
dimensions.*[fixme: 1D only right now]*</p>
<p>For 1D interpolation, it handles linear and spline(cubic, quadratic, and quintic) for both uniformly and non-uniformly spaced
data points &#8220;out of the box.&#8221;  Users can control the behavior of values that fall outside of the range of interpolation either
by When new values fall outside of the range of interpolation data, the tools can be</p>
<p>For 2D interpolation,</p>
</div>
<div class="section">
<h1 id="d-interpolation-with-the-functional-interface">1D Interpolation with the Functional Interface<a class="headerlink" href="#d-interpolation-with-the-functional-interface" title="Permalink to this headline">¶</a></h1>
<div class="section">
<h2 id="basic-usage">Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>The following example uses the &#8216;interp1d&#8217; function to linearly interpolate a sin
curve from a sparse set of values.</p>
<pre>    # start up ipython for our examples.
    $ ipython -pylab

    In [1]: from interpolate import interp1d

    # Create our "known" set of 5 points with the x values in one array and the y values in another.
    In [2]: x = linspace(0, 2*pi, 5)
    In [3]: y = sin(x)

# If we only want a value at a single point, we can pass in a scalar and interp1d
# will return a scalar
In [9]: interp1d(x, y, 1.2)
Out [10]: 0.76394372684109768

# 0-dimensional arrays are also treated as scalars
In [9]: interp1d(x, y, array(1.2) )
Out [10]: 0.76394372684109768

    # To interpolate from these x,y values at multiple points, possibly to get a more dense set
# of new_x, new_y values to approximate the function, pass a numpy array to interp1d,
# and the return type will also be a numpy array.
    In [4]: new_x = linspace(0, 2*pi, 21)
    In [5]: new_y = interp1d(x, y, new_x)

    # Plot the results using matplotlib. [note examples assume you are running in ipython -pylab]
    In [6]: plot(x, y, 'ro', new_x, new_y, 'b-')</pre>
<img alt="_images/interp1d_linear_simple.png" src="_images/interp1d_linear_simple.png" />
<pre># Alternatively, x, y and new_x can also be lists (they are internally converted into arrays
# before processing)
In []: interp1d( [1.0, 2.0], [1.0, 2.0], [1.3] )
Out []: array([ 1.3 ])</pre>
<p>What happens if we pass in a new_x with values outside the range of x?  By default, new_y will be
NaN at all such points:</p>
<pre># If we attempt to extrapolate values outside the interpolation range, interp1d defaults
# to returning NaN
In [7]: interp1d(x, y, array([-2, -1, 1, 2]))
Out [8]: array([        NaN,     NaN,     0.63661977,   0.72676046])</pre>
<p>If we want a type of interpolation other than linear, there is a range of options which we can specify
with the keyword argument interp, which is usually a string.  For example:</p>
<pre># If we want quadratic (2nd order) spline interpolation, we can use the string 'quadratic'
In [7]: new_y_quadratic = interp1d(x, y, new_x, interp = 'quadratic')
In [8]: plot(x, y, 'r', new_x, new_y_quadratic, 'g')</pre>
<img alt="_images/interp1d_linear_and_quadratic.png" src="_images/interp1d_linear_and_quadratic.png" />
<p>There is a large selection of strings which specify a range of interpolation methods.  The list includes:</p>
<ol class="arabic simple">
<li>&#8216;linear&#8217; : linear interpolation, same as the default</li>
<li>&#8216;block&#8217; : &#8220;round new_x down&#8221; to the nearest values where we know y.</li>
<li>&#8216;spline&#8217; : spline interpolation of default order (currently 3)</li>
<li>&#8216;cubic&#8217; : 3rd order spline interpolation</li>
<li>&#8216;quartic&#8217; : 4th order spline interpolation</li>
<li>&#8216;quintic&#8217; : 5th order spline interpolation</li>
</ol>
<p>The same flexibility is afforded for extrapolation by the keywords extrap_low and extrap_high:</p>
<pre>In []: z = array([ 1.0, 2.0 ])
In []: interp1d(z, z, array([-5.0, 5.0]), extrap_low = 'linear', extrap_high = 'linear')
Out []: array([-5.0, 5.0])</pre>
<p>If a string is passed which is not recognized, and error will be raised.</p>
<p>Finally, interp, extrap_low, and extrap_high can be set to default return values (just make sure that
the return values are not callable and are not strings):</p>
<pre>In []: interp1d(x, y, array([ -5.0, 1.1, 100 ]), interp = 8.2, extrap_low = 7.2, extrap_high = 9.2)
Out []: array([ 7.2, 8.2, 9.2 ])</pre>
<p>It is also possible, though slightly trickier, to define your own interpolation methods and pass them
in to interp, extrap_low, and extrap_high.  For more information, see &#8220;User-defined Interpolation Methods&#8221;
below.</p>
</div>
<div class="section">
<h2 id="removal-of-bad-datapoints">Removal of Bad Datapoints<a class="headerlink" href="#removal-of-bad-datapoints" title="Permalink to this headline">¶</a></h2>
<p>Many datasets have missing or corrupt data which it is desirable to ignore when interpolating,
and to this end, interp1d has the keyword argument bad_data.</p>
<p>bad_data defaults to being None.  But if it is a list, all &#8220;bad&#8221; points (x[i], y[i]) will be removed
before any interpolation is performed.  A point is &#8220;bad&#8221; if
1) either x[i] or y[i] is in bad_data, or
2) either x[i] or y[i] is NaN</p>
<p>Note that bad_data must be either None or a list of numbers.  Including NaN or None in the list,
for example, is not supported.  NaNs are removed anyway, and None must not appear in the
data.</p>
<pre># the bad_data
In []: x = arange(10.); y = arange(10.)
In []: x[1] = NaN # bad data
In []: y[2] = 55   # bad data
In []: new_x = arange(0, 10., .1)
In []: new_y_bad = interp1d(x, y, new_x)
In []: new_y_no_bad = interp1d(x, y, new_x, bad_data=[55])
In []: plot(new_x, new_y_bad, 'r', new_x, new_y_no_bad, 'g')</pre>
<img alt="_images/with_and_without_bad_data.png" src="_images/with_and_without_bad_data.png" />
</div>
<div class="section">
<h2 id="user-defined-interpolation-methods">User-defined Interpolation Methods<a class="headerlink" href="#user-defined-interpolation-methods" title="Permalink to this headline">¶</a></h2>
<p>If you want more direct control than is afforded by the string interface, this is also possible.
Note, however, that this is not for the faint-hearted.  You must be very careful to have correct
format, and failure to do so can cause a range of errors.</p>
<p>interp can also be set to a function, a callable class, or an instance of a callable class.  If you do this, however, you will
have to be careful about formatting.</p>
<p>If a function is passed, it will be called when interpolating.
It is assumed to have the form</p>
<div class="highlight"><pre><span class="n">newy</span> <span class="o">=</span> <span class="n">interp</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">newx</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
</pre></div>
<p>where x, y, newx, and newy are all numpy arrays.</p>
<p>If a callable class is passed, it is assumed to have format:</p>
<pre>instance = Class(x, y, **kw).</pre>
<p>which can then be called by</p>
<blockquote>
new_y = instance(new_x)</blockquote>
<p>If a callable object with method &#8220;init_xy&#8221; or &#8220;set_xy&#8221; is
passed, that method will be used to set x and y as follows:</p>
<div class="highlight"><pre><span class="n">instance</span><span class="o">.</span><span class="n">set_xy</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
</pre></div>
<p>and the object will be called during interpolation.</p>
<blockquote>
new_y = instance(new_x)</blockquote>
<p>If the &#8220;init_xy&#8221; and &#8220;set_xy&#8221; are not present, it will be called as</p>
<blockquote>
new_y = argument(new_x)</blockquote>
<p>A primitive type which is not a string signifies a function
which is identically that value (e.g. val and
lambda x, y, newx : val are equivalent).</p>
<pre># However, this behavior can be overwritten in the same way as linear interpolation,
# by setting the keyword extrap_low (for values below the range of interpolation) and
# extrap_high (for values above that range)
In []: def dummy(x, y, newx, default = 5.1):
            # Note that dummy has acceptable form
            return np.array([ default ])
In []: class Phony:
            def __init__(self, val = 4.0):
                self.val = val
            def init_xy(self, x, y):
                pass
            def __call__(self, newx):
                return self.val
In []: x = arange(5.0)
In []: y = arange(5.0)
In []: new_x = np.array([ -1, .4, 7 ])
In []: new_y = interp1d(x, y, interp = Phony,
                                    interpkw = {'val':1.0},
                                    extrap_low = dummy,
                                    lowkw = {'default':7.1},
                                    extrap_high = dummy
                                    )
In []: new_y
Out []: array([ 7.1, 1.0, 4.0 ])</pre>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3>Table Of Contents</h3>
            <ul>
<li><a class="reference" href="">Overview</a></li>
<li><a class="reference" href="#d-interpolation-with-the-functional-interface">1D Interpolation with the Functional Interface</a><ul>
<li><a class="reference" href="#basic-usage">Basic Usage</a></li>
<li><a class="reference" href="#removal-of-bad-datapoints">Removal of Bad Datapoints</a></li>
<li><a class="reference" href="#user-defined-interpolation-methods">User-defined Interpolation Methods</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="index.html" title="previous chapter">Welcome to interpolate&#8217;s documentation!</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/tutorial.txt">Show Source</a></li>
            </ul>
            <h3>Quick search</h3>
            <form class="search" action="search.html" method="get">
              <input type="text" name="q" size="18" /> <input type="submit" value="Go" />
              <input type="hidden" name="check_keywords" value="yes" />
              <input type="hidden" name="area" value="default" />
            </form>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to interpolate&#8217;s documentation!"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">interpolate v0.7 documentation</a> &raquo;</li>
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2008, Field Cady and Eric Jones.
      Last updated on Jul 30, 2008.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
    </div>
  </body>
</html>